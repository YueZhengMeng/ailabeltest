(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06f4aa28"],{"0551":function(e,t,a){"use strict";a("a6bf")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},2:function(e,t){},2423:function(e,t,a){"use strict";a("b3fe")},"2ade":function(e,t,a){"use strict";var n=a("cebe"),s=a.n(n),i=a("5c96"),o=a("f3e4"),r=a("14b7"),l=a.n(r);const u=s.a.create({baseURL:"http://localhost:9000",timeout:12e3});u.interceptors.request.use(e=>(Object(o["a"])()&&(e.headers["Authorization"]="Bearer "+Object(o["a"])()),e.headers["Content-Type"]="application/json;charset=utf-8",e),e=>{console.log(e),Promise.reject(e)}),u.interceptors.response.use(e=>{console.log("response = ",e);let{data:t,msg:a,status:n}=e||{};"object"===typeof t&&t.hasOwnProperty("jwtToken")&&(Object(o["c"])(t.jwtToken),t=l.a.decode(t.jwtToken));let s={data:t,code:n};return n>=200&&n<300||0==n?(console.log("newData:",s),s):(Object(i["Message"])({type:"error",message:a}),Promise.reject(t))},e=>{const t=e.response,a=t.data.status;return a||Object(i["Message"])({type:"error",message:"接口请求失败"}),Promise.reject(e)}),t["a"]=u},3:function(e,t){},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"pagination-wrapper"},[t("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:e.layout},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},s=[],i={name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,15,20,50]},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{currentPage:{get(){return this.page},set(e){this.$emit("update:page",e)}},pageSize:{get(){return this.limit},set(e){this.emit("update:limit",e)}}},methods:{handleSizeChange(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}},o=i,r=(a("2423"),a("2877")),l=Object(r["a"])(o,n,s,!1,null,null,null);t["a"]=l.exports},3890:function(e,t,a){"use strict";a("42aa")},4:function(e,t){},"42aa":function(e,t,a){},5:function(e,t){},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},"909c":function(e,t,a){"use strict";a("f56f")},a400:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"table-classic-wrapper"},[t("el-card",{attrs:{shadow:"always"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",size:"medium"}},[t("el-table-column",{attrs:{prop:"uploadDate",label:"上传时间",align:"center",sortable:""}}),t("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.handleSelect(a.$index,a.row)}}},[e._v("显示图片")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(a.$index,a.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},s=[],i=a("c24f"),o=a("333d"),r=a("c7f0"),l=a("b522"),u=(a("d8ad"),{name:"Table",components:{Pagination:o["a"],Upload:r["a"],Hints:l["a"]},data(){return{listLoading:!0,listQuery:{uploaderID:parseInt(localStorage.getItem("_userID"))},total:0,tableData:[],multipleSelection:[]}},created(){this.fetchData()},mounted(){this.$bus.$on("_refreshImage",e=>{this.fetchData()})},beforeDestroy(){this.$bus.$off("_refreshImage")},methods:{handleDelete(e,t){console.log(e,t),this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(i["a"])(t.imageID).then(e=>{console.log("deletimage-res:",e),this.$message({type:"success",message:"删除成功!"}),this.fetchData()}).catch(()=>{this.$message({type:"warning",message:"删除失败"}),this.fetchData()}),this.fetchData()}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},fetchData(){this.listLoading=!0,Object(i["c"])(this.listQuery).then(e=>{console.log("getUserAllImage",e);const t=e.data;if(e.code>=200&&e.code<300){this.total=t.length,this.tableData=t;for(let e of t)0==e.status?e.status="待处理":1==e.status?e.status="已完成":2==e.status&&(e.status="处理中");this.listLoading=!1}}).catch(()=>{this.listLoading=!1})},handleSelect(e,t){console.log(e,t);let a=this.$router.resolve({name:"user_showannotation",query:{imageID:t.imageID,userID:localStorage.getItem("_userID"),path:t.path}});window.open(a.href,"_blank")}}}),c=u,p=(a("909c"),a("2877")),d=Object(p["a"])(c,n,s,!1,null,null,null);t["default"]=d.exports},a6bf:function(e,t,a){},b3fe:function(e,t,a){},b522:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"hints-wrapper"},[t("div",{staticClass:"hint-title"},[t("i",{staticClass:"vue-dsn-icon-tishi"}),t("span",[e._t("hintName")],2)]),t("div",{staticClass:"hint-info"},[e._t("hintInfo")],2)])},s=[],i={name:"Hints"},o=i,r=(a("3890"),a("2877")),l=Object(r["a"])(o,n,s,!1,null,null,null);t["a"]=l.exports},c24f:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o}));var n=a("2ade");function s(e){return Object(n["a"])({url:"/api/image/delete/"+e,method:"delete",data:e})}function i(e){return Object(n["a"])({url:"/api/image/byByUploaderID/"+e.uploaderID,method:"get",params:e})}function o(e){return Object(n["a"])({url:"/api/annotation/byImageID/"+e.imageID,method:"get",params:e})}},c7f0:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-upload",{staticClass:"files-upload",attrs:{action:e.url,accept:e.filesFormat,multiple:e.isMultiple,"show-file-list":e.isShowList,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[e._t("default")],2)},s=[],i={name:"Upload",props:{url:{type:String,default:""},filesFormat:{type:String,default:""},isMultiple:{type:Boolean,default:!1},isShowList:{type:Boolean,default:!1}},methods:{uploadSuccess(e,t){if([200,0].includes(e.code)){const t=e.data;this.$emit("on-success",t)}else this.$emit("on-error"),this.$message.error(e.msg)},uploadError(e,t){this.$emit("on-error")}}},o=i,r=(a("0551"),a("2877")),l=Object(r["a"])(o,n,s,!1,null,null,null);t["a"]=l.exports},d8ad:function(e,t,a){"use strict";var n=a("8bbf"),s=a.n(n);new s.a},f56f:function(e,t,a){}}]);