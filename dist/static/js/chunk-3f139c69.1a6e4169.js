(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f139c69"],{"0551":function(t,e,a){"use strict";a("a6bf")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},2:function(t,e){},2423:function(t,e,a){"use strict";a("b3fe")},"2ade":function(t,e,a){"use strict";var i=a("cebe"),o=a.n(i),n=a("5c96"),l=a("f3e4"),s=a("14b7"),r=a.n(s);const c=o.a.create({baseURL:"http://localhost:9000",timeout:12e3});c.interceptors.request.use(t=>(Object(l["a"])()&&(t.headers["Authorization"]="Bearer "+Object(l["a"])()),t.headers["Content-Type"]="application/json;charset=utf-8",t),t=>{console.log(t),Promise.reject(t)}),c.interceptors.response.use(t=>{console.log("response = ",t);let{data:e,msg:a,status:i}=t||{};"object"===typeof e&&e.hasOwnProperty("jwtToken")&&(Object(l["c"])(e.jwtToken),e=r.a.decode(e.jwtToken));let o={data:e,code:i};return i>=200&&i<300||0==i?(console.log("newData:",o),o):(Object(n["Message"])({type:"error",message:a}),Promise.reject(e))},t=>{const e=t.response,a=e.data.status;return a||Object(n["Message"])({type:"error",message:"接口请求失败"}),Promise.reject(t)}),e["a"]=c},3:function(t,e){},"333d":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination-wrapper"},[e("el-pagination",{attrs:{background:t.background,"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:t.layout},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],n={name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,15,20,50]},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},l=n,s=(a("2423"),a("2877")),r=Object(s["a"])(l,i,o,!1,null,null,null);e["a"]=r.exports},3890:function(t,e,a){"use strict";a("42aa")},4:function(t,e){},"42aa":function(t,e,a){},5:function(t,e){},"50fc":function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return n})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return s})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"i",(function(){return d})),a.d(e,"h",(function(){return h}));var i=a("2ade");function o(t){return Object(i["a"])({url:"/api/user/all",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/api/image/all",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/api/annotation/all",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/api/image/byImageID/"+t,method:"get",params:t})}function r(t){return Object(i["a"])({url:"/api/user/deleteUser/"+t,method:"delete",data:t})}function c(t){return Object(i["a"])({url:"/api/image/delete/"+t,method:"delete",data:t})}function u(t){return Object(i["a"])({url:"/api/annotation/delete/"+t,method:"delete",data:t})}function d(t){return Object(i["a"])({url:"/api/user/resetRole",method:"put",data:t})}function h(t){return Object(i["a"])({url:"/api/user/register",method:"post",data:t})}},5580:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-classic-wrapper"},[e("el-card",{attrs:{shadow:"always"}},[e("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:t.listQuery,"label-width":"90px"}},[e("el-form-item",{attrs:{label:"标注者ID"}},[e("el-input",{attrs:{placeholder:"标注人ID"},model:{value:t.listQuery.annotaterID,callback:function(e){t.$set(t.listQuery,"annotaterID",e)},expression:"listQuery.annotaterID"}})],1),e("el-form-item",{attrs:{label:"审核者ID"}},[e("el-input",{attrs:{placeholder:"审核人ID"},model:{value:t.listQuery.checkerID,callback:function(e){t.$set(t.listQuery,"checkerID",e)},expression:"listQuery.checkerID"}})],1),e("el-form-item",{attrs:{label:"审核结果"}},[e("el-input",{attrs:{placeholder:"审核结果"},model:{value:t.listQuery.checkResult,callback:function(e){t.$set(t.listQuery,"checkResult",e)},expression:"listQuery.checkResult"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",size:"medium"}},[e("el-table-column",{attrs:{prop:"annotaterID",label:"标注者ID",align:"center"}}),e("el-table-column",{attrs:{prop:"annotationDate",label:"标注时间",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"checkerID",label:"审核者ID",align:"center"}}),e("el-table-column",{attrs:{prop:"checkDate",label:"审核时间",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"checkResult",label:"审核结果",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleSelect(a.$index,a.row)}}},[t._v("详细信息")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{staticClass:"dialog-form",attrs:{title:"编辑",visible:t.formVisible,width:"45%","before-close":t.handleClose},on:{"update:visible":function(e){t.formVisible=e}}},[e("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,rules:t.formRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"标注者ID：",prop:"annotaterID"}},[e("el-input",{attrs:{placeholder:"标注人ID"},model:{value:t.dialogForm.annotaterID,callback:function(e){t.$set(t.dialogForm,"annotaterID",e)},expression:"dialogForm.annotaterID"}})],1),e("el-form-item",{attrs:{label:"审核者ID：",prop:"checkerID"}},[e("el-input",{attrs:{placeholder:"审核人ID"},model:{value:t.dialogForm.description,callback:function(e){t.$set(t.dialogForm,"description",e)},expression:"dialogForm.description"}})],1),e("el-form-item",{attrs:{label:"审核结果：",prop:"checkResult"}},[e("el-input",{attrs:{placeholder:"审核结果"},model:{value:t.dialogForm.checkResult,callback:function(e){t.$set(t.dialogForm,"checkResult",e)},expression:"dialogForm.checkResult"}})],1),e("div",{staticClass:"footer-item"},[e("el-button",{on:{click:t.cancleForm}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",disabled:t.isSubmit},on:{click:function(e){return t.submitForm("dialogForm")}}},[t._v("确 定")])],1)],1)],1),e("el-dialog",{attrs:{title:"导入数据",visible:t.importVisible,width:"20%"},on:{"update:visible":function(e){t.importVisible=e}}},[e("div",{staticClass:"upload-box"},[e("span",[t._v("选择文件：")]),e("Upload",{attrs:{"files-format":t.filesFormat}},[e("i",{staticClass:"vue-dsn-icon-upload"}),t._v("上传文件 ")])],1),e("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")]),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancleImport}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirmImport}},[t._v("确 定")])],1)]),e("el-dialog",{attrs:{title:"导出数据",visible:t.exportVisible,width:"30%"},on:{"update:visible":function(e){t.exportVisible=e}}},[e("div",{staticClass:"export-data"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("xlsx")}}},[t._v("EXCEL格式")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("csv")}}},[t._v("CSV格式")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("txt")}}},[t._v("TXT格式")])],1),e("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")])]),e("el-dialog",{staticClass:"dialog-form",attrs:{title:"详细信息",visible:t.detailVisible,width:"45%","before-close":t.handleClose2},on:{"update:visible":function(e){t.detailVisible=e}}})],1)],1)},o=[],n=a("50fc"),l=a("cd77"),s=a("333d"),r=a("c7f0"),c=a("b522"),u={name:"Table",components:{Pagination:s["a"],Upload:r["a"],Hints:c["a"]},data(){return{listLoading:!0,listQuery:{annotatorName:void 0,username:void 0,status:void 0},paganation:{currentPage:1,pageSize:10},dialogForm:{annotaterID:void 0,checkerID:void 0,checkResult:void 0},total:0,Data:[],tableData:[],multipleSelection:[],formVisible:!1,formRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}]},isSubmit:!1,importVisible:!1,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1,detailVisible:!1}},created(){this.fetchData()},methods:{handleSelectionChange(t){this.multipleSelection=t},showDetails(t,e){this.detailVisible=!0},handleCreate(){this.formVisible=!0,this.dialogForm.annotatorName=void 0,this.dialogForm.username=void 0,this.dialogForm.description=void 0,this.dialogForm.uploadDate=void 0,this.dialogForm.status=void 0},handleEdit(t,e){console.log(t,e),this.formVisible=!0,this.dialogForm.annotatorName=e.annotatorName,this.dialogForm.username=e.username,this.dialogForm.description=e.description,this.dialogForm.uploadDate=e.uploadDate,this.dialogForm.status=e.status},handleDelete(t,e){console.log(t,e),this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(n["a"])(e.annotationID).then(t=>{console.log("deleteannotation-res:",t),this.$message({type:"success",message:"删除成功!"}),this.fetchData()}).catch(()=>{this.$message({type:"warning",message:"删除失败"}),this.fetchData()}),this.fetchData()}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleClose(){this.formVisible=!1,this.$refs.dialogForm.resetFields()},handleClose2(){this.detailVisible=!1,this.$refs.dialogForm.resetFields()},fetchData(){this.listLoading=!0,Object(n["d"])().then(t=>{console.log("getAllUser",t);const e=t.data;if(t.code>=200&&t.code<300){this.total=e.length,this.tableData=e,this.Data=e;for(let t of e)0==t.checkResult?t.checkResult="未审核":1==t.checkResult?t.checkResult="通过":2==t.checkResult&&(t.checkResult="不通过");this.listLoading=!1}}).catch(()=>{this.listLoading=!1})},handleSelect(t,e){console.log(t,e),Object(n["g"])(e.imageID).then(t=>{console.log("getImageByImageID",t);const a=t.data;let i=this.$router.resolve({name:"other_showannotation",query:{imageID:e.imageID,userID:localStorage.getItem("_userID"),annotationResult:e.annotationResult,path:a.path}});window.open(i.href,"_blank")})},onSubmit(){console.log("this.tableData:",this.tableData);let t=Object.values(this.listQuery).filter(t=>void 0!==t).length>0,e=this.Data.slice();this.listQuery.annotaterID&&(e=e.filter(t=>void 0!=t["annotaterID"]&&String(t["annotaterID"])===this.listQuery.annotaterID),console.log("result1",e)),this.listQuery.checkerID&&(e=e.filter(t=>(console.log(t,t["checkerID"],this.listQuery.checkerID),void 0!==t["checkerID"]&&String(t["checkerID"])===this.listQuery.checkerID)),console.log("result2",e)),this.listQuery.checkResult&&(e=e.filter(t=>void 0!==t["checkResult"]&&-1!==t["checkResult"].toString().indexOf(this.listQuery.checkResult)),console.log("result3",e)),t||(e=this.Data.slice()),this.tableData=e},handleImport(){this.importVisible=!0},submitForm(t){this.$refs[t].validate(t=>{if(!t)return this.isSubmit=!1,!1;this.formVisible=!1})},cancleForm(){this.$refs.dialogForm.resetFields(),this.formVisible=!1},confirmImport(){this.importVisible=!1},cancleImport(){this.importVisible=!1},exportTable(t){if(this.tableData.length){const e={header:["标注者","上传者","切片描述","上传时间","状态"],key:["annotatorName","username","description","uploadDate","status"],data:this.tableData,autoWidth:!0,fileName:"综合表格",bookType:t};l["a"].exportDataToExcel(e),this.exportVisible=!1}},selectChange(t){},stateChange(t){}}},d=u,h=(a("dcd8"),a("2877")),p=Object(h["a"])(d,i,o,!1,null,null,null);e["default"]=p.exports},6:function(t,e){},7:function(t,e){},8:function(t,e){},"8fb4":function(t,e,a){},9:function(t,e){},a6bf:function(t,e,a){},b3fe:function(t,e,a){},b522:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hints-wrapper"},[e("div",{staticClass:"hint-title"},[e("i",{staticClass:"vue-dsn-icon-tishi"}),e("span",[t._t("hintName")],2)]),e("div",{staticClass:"hint-info"},[t._t("hintInfo")],2)])},o=[],n={name:"Hints"},l=n,s=(a("3890"),a("2877")),r=Object(s["a"])(l,i,o,!1,null,null,null);e["a"]=r.exports},c7f0:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-upload",{staticClass:"files-upload",attrs:{action:t.url,accept:t.filesFormat,multiple:t.isMultiple,"show-file-list":t.isShowList,"on-success":t.uploadSuccess,"on-error":t.uploadError}},[t._t("default")],2)},o=[],n={name:"Upload",props:{url:{type:String,default:""},filesFormat:{type:String,default:""},isMultiple:{type:Boolean,default:!1},isShowList:{type:Boolean,default:!1}},methods:{uploadSuccess(t,e){if([200,0].includes(t.code)){const e=t.data;this.$emit("on-success",e)}else this.$emit("on-error"),this.$message.error(t.msg)},uploadError(t,e){this.$emit("on-error")}}},l=n,s=(a("0551"),a("2877")),r=Object(s["a"])(l,i,o,!1,null,null,null);e["a"]=r.exports},cd77:function(t,e,a){"use strict";a("907a"),a("986a"),a("1d02"),a("3c5d"),a("3c65"),a("14d9");var i=a("1146"),o=a.n(i),n=a("21a6");function l(t,e){const a=e.map(t=>t.map(t=>null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length})),i=a[0];for(let o=1;o<a.length;o++)for(let t=0;t<a[o].length;t++)i[t].wch<a[o][t].wch&&(i[t].wch=a[o][t].wch);t["!cols"]=i}function s(t,e){return e.map(e=>t.map(t=>e[t]))}function r(t){const e=new ArrayBuffer(t.length),a=new Uint8Array(e);for(let i=0;i!==t.length;++i)a[i]=255&t.charCodeAt(i);return e}function c({header:t,key:e,data:a,fileName:i,autoWidth:c=!0,bookType:u="xlsx"}={}){const d=o.a.utils.book_new(),h=s(e,a);i=i||"excel-list",h.unshift(t);const p=o.a.utils.aoa_to_sheet(h);c&&l(p,h),o.a.utils.book_append_sheet(d,p,i);const m=o.a.write(d,{bookType:u,bookSST:!1,type:"binary"});Object(n["saveAs"])(new Blob([r(m)],{type:"application/octet-stream"}),`${i}.${u}`)}function u(t){const e=[],a=o.a.utils.decode_range(t["!ref"]);let i;const n=a.s.r;for(i=a.s.c;i<=a.e.c;++i){const a=t[o.a.utils.encode_cell({c:i,r:n})];let l="UNKNOWN "+i;a&&a.t&&(l=o.a.utils.format_cell(a)),e.push(l)}return e}function d(t,e){const a=o.a.read(t,{type:e}),i=a.SheetNames[0],n=a.Sheets[i],l=u(n),s=o.a.utils.sheet_to_json(n);return{header:l,results:s}}e["a"]={exportDataToExcel:c,readDataFromExcel:d}},dcd8:function(t,e,a){"use strict";a("8fb4")}}]);