(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25c2c190"],{"0551":function(t,e,i){"use strict";i("a6bf")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},2:function(t,e){},2423:function(t,e,i){"use strict";i("b3fe")},"2ade":function(t,e,i){"use strict";var a=i("cebe"),o=i.n(a),s=i("5c96"),r=i("f3e4"),l=i("14b7"),n=i.n(l);const c=o.a.create({baseURL:"http://localhost:9000",timeout:12e3});c.interceptors.request.use(t=>(Object(r["a"])()&&(t.headers["Authorization"]="Bearer "+Object(r["a"])()),t.headers["Content-Type"]="application/json;charset=utf-8",t),t=>{console.log(t),Promise.reject(t)}),c.interceptors.response.use(t=>{console.log("response = ",t);let{data:e,msg:i,status:a}=t||{};"object"===typeof e&&e.hasOwnProperty("jwtToken")&&(Object(r["c"])(e.jwtToken),e=n.a.decode(e.jwtToken));let o={data:e,code:a};return a>=200&&a<300||0==a?(console.log("newData:",o),o):(Object(s["Message"])({type:"error",message:i}),Promise.reject(e))},t=>{const e=t.response,i=e.data.status;return i||Object(s["Message"])({type:"error",message:"接口请求失败"}),Promise.reject(t)}),e["a"]=c},3:function(t,e){},"333d":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination-wrapper"},[e("el-pagination",{attrs:{background:t.background,"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:t.layout},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],s={name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,15,20,50]},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},r=s,l=(i("2423"),i("2877")),n=Object(l["a"])(r,a,o,!1,null,null,null);e["a"]=n.exports},3890:function(t,e,i){"use strict";i("42aa")},4:function(t,e){},"42aa":function(t,e,i){},5:function(t,e){},"50fc":function(t,e,i){"use strict";i.d(e,"e",(function(){return o})),i.d(e,"f",(function(){return s})),i.d(e,"d",(function(){return r})),i.d(e,"g",(function(){return l})),i.d(e,"c",(function(){return n})),i.d(e,"b",(function(){return c})),i.d(e,"a",(function(){return u})),i.d(e,"i",(function(){return d})),i.d(e,"h",(function(){return m}));var a=i("2ade");function o(t){return Object(a["a"])({url:"/api/user/all",method:"get",params:t})}function s(t){return Object(a["a"])({url:"/api/image/all",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/api/annotation/all",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/api/image/byImageID/"+t,method:"get",params:t})}function n(t){return Object(a["a"])({url:"/api/user/deleteUser/"+t,method:"delete",data:t})}function c(t){return Object(a["a"])({url:"/api/image/delete/"+t,method:"delete",data:t})}function u(t){return Object(a["a"])({url:"/api/annotation/delete/"+t,method:"delete",data:t})}function d(t){return Object(a["a"])({url:"/api/user/resetRole",method:"put",data:t})}function m(t){return Object(a["a"])({url:"/api/user/register",method:"post",data:t})}},6:function(t,e){},7:function(t,e){},7783:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-classic-wrapper"},[e("el-card",{attrs:{shadow:"always"}},[e("div",{staticClass:"control-btns"},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("新建数据")])],1),e("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:t.listQuery,"label-width":"90px"}},[e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{attrs:{placeholder:"用户名"},model:{value:t.listQuery.username,callback:function(e){t.$set(t.listQuery,"username",e)},expression:"listQuery.username"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",size:"medium"}},[e("el-table-column",{attrs:{prop:"userID",label:"用户ID",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"username",label:"用户名",align:"center"}}),e("el-table-column",{attrs:{prop:"password",label:"用户密码",align:"center"}}),e("el-table-column",{attrs:{prop:"role",label:"角色",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini",disabled:i.row.isVisible},on:{click:function(e){return t.handleEdit(i.$index,i.row)}}},[t._v("设置权限")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(i.$index,i.row)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{staticClass:"dialog-form",attrs:{title:"新建",visible:t.formVisible,width:"50%","before-close":t.handleClose},on:{"update:visible":function(e){t.formVisible=e}}},[e("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[e("el-input",{attrs:{placeholder:"用户名"},model:{value:t.dialogForm.username,callback:function(e){t.$set(t.dialogForm,"username",e)},expression:"dialogForm.username"}})],1),e("el-form-item",{attrs:{label:"密码：",prop:"password"}},[e("el-input",{attrs:{placeholder:"密码"},model:{value:t.dialogForm.password,callback:function(e){t.$set(t.dialogForm,"password",e)},expression:"dialogForm.password"}})],1),e("div",{staticClass:"footer-item"},[e("el-button",{on:{click:t.cancleForm}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",disabled:t.isSubmit},on:{click:function(e){return t.submitForm("dialogForm")}}},[t._v("确 定")])],1)],1)],1),e("el-dialog",{staticClass:"dialog-form",attrs:{title:"设置权限",visible:t.formEditVisible,width:"50%","before-close":t.handleClose2},on:{"update:visible":function(e){t.formEditVisible=e}}},[e("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"用户名：",prop:"username"}},[e("span",[t._v(t._s(t.dialogForm.username))])]),e("el-form-item",{attrs:{label:"密码：",prop:"password"}},[e("span",[t._v(t._s(t.dialogForm.password))])]),e("el-form-item",{attrs:{label:"角色：",prop:"role"}},[e("el-select",{model:{value:t.dialogForm.role,callback:function(e){t.$set(t.dialogForm,"role",e)},expression:"dialogForm.role"}},[e("el-option",{attrs:{value:0,label:"普通用户"}}),e("el-option",{attrs:{value:1,label:"标注人员"}}),e("el-option",{attrs:{value:2,label:"审核人员"}}),e("el-option",{attrs:{value:3,label:"管理员"}})],1)],1),e("div",{staticClass:"footer-item"},[e("el-button",{on:{click:t.cancleForm2}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",disabled:t.isSubmit},on:{click:function(e){return t.submitForm2("dialogForm")}}},[t._v("确 定")])],1)],1)],1),e("el-dialog",{attrs:{title:"导入数据",visible:t.importVisible,width:"20%"},on:{"update:visible":function(e){t.importVisible=e}}},[e("div",{staticClass:"upload-box"},[e("span",[t._v("选择文件：")]),e("Upload",{attrs:{"files-format":t.filesFormat}},[e("i",{staticClass:"vue-dsn-icon-upload"}),t._v("上传文件 ")])],1),e("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")]),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancleImport}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirmImport}},[t._v("确 定")])],1)]),e("el-dialog",{attrs:{title:"导出数据",visible:t.exportVisible,width:"30%"},on:{"update:visible":function(e){t.exportVisible=e}}},[e("div",{staticClass:"export-data"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("xlsx")}}},[t._v("EXCEL格式")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("csv")}}},[t._v("CSV格式")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("txt")}}},[t._v("TXT格式")])],1),e("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")])])],1)],1)},o=[],s=i("50fc"),r=i("cd77"),l=i("333d"),n=i("c7f0"),c=i("b522"),u={name:"Table",components:{Pagination:l["a"],Upload:n["a"],Hints:c["a"]},data(){return{listLoading:!0,listQuery:{username:void 0,currentPage:1,pageSize:10},dialogForm:{username:void 0,password:void 0,role:void 0},total:0,Data:[],tableData:[],multipleSelection:[],formVisible:!1,isSubmit:!1,importVisible:!1,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1,formEditVisible:!1}},created(){this.fetchData()},methods:{handleSelectionChange(t){this.multipleSelection=t},handleCreate(){this.formVisible=!0,this.dialogForm.username=void 0,this.dialogForm.password=void 0},handleEdit(t,e){console.log(t,e),this.formEditVisible=!0,this.dialogForm.userID=e.userID,this.dialogForm.username=e.username,this.dialogForm.password=e.password,this.dialogForm.role=e.role},handleDelete(t,e){console.log(t,e),this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(s["c"])(e.userID).then(t=>{console.log("deleteuser-res:",t),this.$message({type:"success",message:"删除成功!"}),this.fetchData()}).catch(()=>{this.$message({type:"warning",message:"删除失败"}),this.fetchData()}),this.fetchData()}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleClose(){this.formVisible=!1,this.$refs.dialogForm.resetFields()},handleClose2(){this.formEditVisible=!1,this.$refs.dialogForm.resetFields()},fetchData(){this.listLoading=!0,Object(s["e"])().then(t=>{console.log("getAllUser",t);const e=t.data;if(t.code>=200&&t.code<300){this.total=e.length,this.tableData=e,this.Data=e;for(let t of e)"user"==t.role?(t.role="普通用户",this.$set(t,"isVisible",!1)):"annotater"==t.role?(t.role="标注人员",this.$set(t,"isVisible",!1)):"checker"==t.role?(t.role="审核人员",this.$set(t,"isVisible",!1)):"admin"==t.role&&(t.role="管理员",this.$set(t,"isVisible",!0));this.listLoading=!1}}).catch(()=>{this.listLoading=!1})},onSubmit(){this.listQuery.username?this.tableData=this.Data.filter(t=>Object.keys(t).some(e=>String(t[e]).toLowerCase().indexOf(this.listQuery.username)>-1)):this.fetchData(),console.log("this.tableData:",this.tableData);let t=Object.values(this.listQuery).filter(t=>void 0!==t).length>0,e=this.Data.slice();this.listQuery.username&&(e=e.filter(t=>void 0!==t["username"]&&-1!==t["username"].toString().indexOf(this.listQuery.username)),console.log("result",e)),t||(e=this.Data.slice()),this.tableData=e},handleImport(){this.importVisible=!0},submitForm(t){this.$refs[t].validate(t=>{if(!t)return this.isSubmit=!1,!1;this.isSubmit=!0,console.log("this.dialogForm",this.dialogForm),Object(s["h"])(this.dialogForm).then(t=>{console.log("res:",t),this.fetchData(),this.formEditVisible=!1,this.isSubmit=!1}),this.formVisible=!1})},submitForm2(t){this.$refs[t].validate(t=>{if(!t)return this.isSubmit=!1,!1;this.isSubmit=!0,console.log("this.dialogForm",this.dialogForm),0==this.dialogForm.role?this.dialogForm.role="user":1==this.dialogForm.role?this.dialogForm.role="annotater":2==this.dialogForm.role?this.dialogForm.role="checker":3==this.dialogForm.role&&(this.dialogForm.role="admin"),Object(s["i"])(this.dialogForm).then(t=>{this.fetchData(),this.formEditVisible=!1,this.isSubmit=!1})})},cancleForm(){this.$refs.dialogForm.resetFields(),this.formVisible=!1},cancleForm2(){this.$refs.dialogForm.resetFields(),this.formEditVisible=!1},confirmImport(){this.importVisible=!1},cancleImport(){this.importVisible=!1},exportTable(t){if(this.tableData.length){const e={header:["用户ID","用户名","用户密码","角色"],key:["userId","username","password","role"],data:this.tableData,autoWidth:!0,fileName:"综合表格",bookType:t};r["a"].exportDataToExcel(e),this.exportVisible=!1}}}},d=u,m=(i("b64d"),i("2877")),p=Object(m["a"])(d,a,o,!1,null,null,null);e["default"]=p.exports},8:function(t,e){},8452:function(t,e,i){},9:function(t,e){},a6bf:function(t,e,i){},b3fe:function(t,e,i){},b522:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hints-wrapper"},[e("div",{staticClass:"hint-title"},[e("i",{staticClass:"vue-dsn-icon-tishi"}),e("span",[t._t("hintName")],2)]),e("div",{staticClass:"hint-info"},[t._t("hintInfo")],2)])},o=[],s={name:"Hints"},r=s,l=(i("3890"),i("2877")),n=Object(l["a"])(r,a,o,!1,null,null,null);e["a"]=n.exports},b64d:function(t,e,i){"use strict";i("8452")},c7f0:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-upload",{staticClass:"files-upload",attrs:{action:t.url,accept:t.filesFormat,multiple:t.isMultiple,"show-file-list":t.isShowList,"on-success":t.uploadSuccess,"on-error":t.uploadError}},[t._t("default")],2)},o=[],s={name:"Upload",props:{url:{type:String,default:""},filesFormat:{type:String,default:""},isMultiple:{type:Boolean,default:!1},isShowList:{type:Boolean,default:!1}},methods:{uploadSuccess(t,e){if([200,0].includes(t.code)){const e=t.data;this.$emit("on-success",e)}else this.$emit("on-error"),this.$message.error(t.msg)},uploadError(t,e){this.$emit("on-error")}}},r=s,l=(i("0551"),i("2877")),n=Object(l["a"])(r,a,o,!1,null,null,null);e["a"]=n.exports},cd77:function(t,e,i){"use strict";i("907a"),i("986a"),i("1d02"),i("3c5d"),i("3c65"),i("14d9");var a=i("1146"),o=i.n(a),s=i("21a6");function r(t,e){const i=e.map(t=>t.map(t=>null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length})),a=i[0];for(let o=1;o<i.length;o++)for(let t=0;t<i[o].length;t++)a[t].wch<i[o][t].wch&&(a[t].wch=i[o][t].wch);t["!cols"]=a}function l(t,e){return e.map(e=>t.map(t=>e[t]))}function n(t){const e=new ArrayBuffer(t.length),i=new Uint8Array(e);for(let a=0;a!==t.length;++a)i[a]=255&t.charCodeAt(a);return e}function c({header:t,key:e,data:i,fileName:a,autoWidth:c=!0,bookType:u="xlsx"}={}){const d=o.a.utils.book_new(),m=l(e,i);a=a||"excel-list",m.unshift(t);const p=o.a.utils.aoa_to_sheet(m);c&&r(p,m),o.a.utils.book_append_sheet(d,p,a);const h=o.a.write(d,{bookType:u,bookSST:!1,type:"binary"});Object(s["saveAs"])(new Blob([n(h)],{type:"application/octet-stream"}),`${a}.${u}`)}function u(t){const e=[],i=o.a.utils.decode_range(t["!ref"]);let a;const s=i.s.r;for(a=i.s.c;a<=i.e.c;++a){const i=t[o.a.utils.encode_cell({c:a,r:s})];let r="UNKNOWN "+a;i&&i.t&&(r=o.a.utils.format_cell(i)),e.push(r)}return e}function d(t,e){const i=o.a.read(t,{type:e}),a=i.SheetNames[0],s=i.Sheets[a],r=u(s),l=o.a.utils.sheet_to_json(s);return{header:r,results:l}}e["a"]={exportDataToExcel:c,readDataFromExcel:d}}}]);