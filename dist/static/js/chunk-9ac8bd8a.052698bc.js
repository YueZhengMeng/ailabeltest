(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ac8bd8a"],{"0551":function(t,e,a){"use strict";a("a6bf")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},2:function(t,e){},2423:function(t,e,a){"use strict";a("b3fe")},"2ade":function(t,e,a){"use strict";var i=a("cebe"),o=a.n(i),s=a("5c96"),l=a("f3e4"),n=a("14b7"),r=a.n(n);const u=o.a.create({baseURL:"http://localhost:9000",timeout:12e3});u.interceptors.request.use(t=>(Object(l["a"])()&&(t.headers["Authorization"]="Bearer "+Object(l["a"])()),t.headers["Content-Type"]="application/json;charset=utf-8",t),t=>{console.log(t),Promise.reject(t)}),u.interceptors.response.use(t=>{console.log("response = ",t);let{data:e,msg:a,status:i}=t||{};"object"===typeof e&&e.hasOwnProperty("jwtToken")&&(Object(l["c"])(e.jwtToken),e=r.a.decode(e.jwtToken));let o={data:e,code:i};return i>=200&&i<300||0==i?(console.log("newData:",o),o):(Object(s["Message"])({type:"error",message:a}),Promise.reject(e))},t=>{const e=t.response,a=e.data.status;return a||Object(s["Message"])({type:"error",message:"接口请求失败"}),Promise.reject(t)}),e["a"]=u},3:function(t,e){},"333d":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination-wrapper"},[e("el-pagination",{attrs:{background:t.background,"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,layout:t.layout},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],s={name:"Pagination",props:{page:{type:Number,default:1,required:!0},limit:{type:Number,default:10,required:!0},background:{type:Boolean,default:!0},pageSizes:{type:Array,default:()=>[10,15,20,50]},total:{type:Number,default:0,required:!0},layout:{type:String,default:"total, prev, pager, next, sizes, jumper"}},computed:{currentPage:{get(){return this.page},set(t){this.$emit("update:page",t)}},pageSize:{get(){return this.limit},set(t){this.emit("update:limit",t)}}},methods:{handleSizeChange(t){this.$emit("pagination",{page:this.currentPage,limit:t})},handleCurrentChange(t){this.$emit("pagination",{page:t,limit:this.pageSize})}}},l=s,n=(a("2423"),a("2877")),r=Object(n["a"])(l,i,o,!1,null,null,null);e["a"]=r.exports},3890:function(t,e,a){"use strict";a("42aa")},4:function(t,e){},"41f7":function(t,e,a){"use strict";a("d83b")},"42aa":function(t,e,a){},5:function(t,e){},"50fc":function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"g",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return u})),a.d(e,"a",(function(){return c})),a.d(e,"i",(function(){return d})),a.d(e,"h",(function(){return p}));var i=a("2ade");function o(t){return Object(i["a"])({url:"/api/user/all",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/api/image/all",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/api/annotation/all",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/api/image/byImageID/"+t,method:"get",params:t})}function r(t){return Object(i["a"])({url:"/api/user/deleteUser/"+t,method:"delete",data:t})}function u(t){return Object(i["a"])({url:"/api/image/delete/"+t,method:"delete",data:t})}function c(t){return Object(i["a"])({url:"/api/annotation/delete/"+t,method:"delete",data:t})}function d(t){return Object(i["a"])({url:"/api/user/resetRole",method:"put",data:t})}function p(t){return Object(i["a"])({url:"/api/user/register",method:"post",data:t})}},6:function(t,e){},7:function(t,e){},8:function(t,e){},9:function(t,e){},a6bf:function(t,e,a){},b3fe:function(t,e,a){},b522:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"hints-wrapper"},[e("div",{staticClass:"hint-title"},[e("i",{staticClass:"vue-dsn-icon-tishi"}),e("span",[t._t("hintName")],2)]),e("div",{staticClass:"hint-info"},[t._t("hintInfo")],2)])},o=[],s={name:"Hints"},l=s,n=(a("3890"),a("2877")),r=Object(n["a"])(l,i,o,!1,null,null,null);e["a"]=r.exports},c7f0:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("el-upload",{staticClass:"files-upload",attrs:{action:t.url,accept:t.filesFormat,multiple:t.isMultiple,"show-file-list":t.isShowList,"on-success":t.uploadSuccess,"on-error":t.uploadError}},[t._t("default")],2)},o=[],s={name:"Upload",props:{url:{type:String,default:""},filesFormat:{type:String,default:""},isMultiple:{type:Boolean,default:!1},isShowList:{type:Boolean,default:!1}},methods:{uploadSuccess(t,e){if([200,0].includes(t.code)){const e=t.data;this.$emit("on-success",e)}else this.$emit("on-error"),this.$message.error(t.msg)},uploadError(t,e){this.$emit("on-error")}}},l=s,n=(a("0551"),a("2877")),r=Object(n["a"])(l,i,o,!1,null,null,null);e["a"]=r.exports},cd77:function(t,e,a){"use strict";a("907a"),a("986a"),a("1d02"),a("3c5d"),a("3c65"),a("14d9");var i=a("1146"),o=a.n(i),s=a("21a6");function l(t,e){const a=e.map(t=>t.map(t=>null==t?{wch:10}:t.toString().charCodeAt(0)>255?{wch:2*t.toString().length}:{wch:t.toString().length})),i=a[0];for(let o=1;o<a.length;o++)for(let t=0;t<a[o].length;t++)i[t].wch<a[o][t].wch&&(i[t].wch=a[o][t].wch);t["!cols"]=i}function n(t,e){return e.map(e=>t.map(t=>e[t]))}function r(t){const e=new ArrayBuffer(t.length),a=new Uint8Array(e);for(let i=0;i!==t.length;++i)a[i]=255&t.charCodeAt(i);return e}function u({header:t,key:e,data:a,fileName:i,autoWidth:u=!0,bookType:c="xlsx"}={}){const d=o.a.utils.book_new(),p=n(e,a);i=i||"excel-list",p.unshift(t);const f=o.a.utils.aoa_to_sheet(p);u&&l(f,p),o.a.utils.book_append_sheet(d,f,i);const h=o.a.write(d,{bookType:c,bookSST:!1,type:"binary"});Object(s["saveAs"])(new Blob([r(h)],{type:"application/octet-stream"}),`${i}.${c}`)}function c(t){const e=[],a=o.a.utils.decode_range(t["!ref"]);let i;const s=a.s.r;for(i=a.s.c;i<=a.e.c;++i){const a=t[o.a.utils.encode_cell({c:i,r:s})];let l="UNKNOWN "+i;a&&a.t&&(l=o.a.utils.format_cell(a)),e.push(l)}return e}function d(t,e){const a=o.a.read(t,{type:e}),i=a.SheetNames[0],s=a.Sheets[i],l=c(s),n=o.a.utils.sheet_to_json(s);return{header:l,results:n}}e["a"]={exportDataToExcel:u,readDataFromExcel:d}},d83b:function(t,e,a){},feaf:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"table-classic-wrapper"},[e("el-card",{attrs:{shadow:"always"}},[e("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:t.listQuery,"label-width":"90px"}},[e("el-form-item",{attrs:{label:"上传者ID"}},[e("el-input",{attrs:{placeholder:"上传人ID"},model:{value:t.listQuery.uploaderID,callback:function(e){t.$set(t.listQuery,"uploaderID",e)},expression:"listQuery.uploaderID"}})],1),e("el-form-item",{attrs:{label:"状态"}},[e("el-input",{attrs:{placeholder:"状态"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark",size:"medium"}},[e("el-table-column",{attrs:{prop:"uploaderID",label:"上传者ID",align:"center"}}),e("el-table-column",{attrs:{prop:"path",label:"路径",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"uploadDate",label:"上传时间",align:"center",sortable:""}}),e("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.showDetails(a.$index,a.row)}}},[t._v("查看图片")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.handleDelete(a.$index,a.row)}}},[t._v("删除")])]}}])})],1),e("el-dialog",{staticClass:"dialog-form",attrs:{title:"编辑",visible:t.formVisible,width:"45%","before-close":t.handleClose},on:{"update:visible":function(e){t.formVisible=e}}},[e("el-form",{ref:"dialogForm",attrs:{model:t.dialogForm,rules:t.formRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"上传者：",prop:"uploaderID"}},[e("span",[t._v(t._s(t.dialogForm.uploaderID))])]),e("el-form-item",{attrs:{label:"上传时间：",prop:"uploadDate"}},[e("span",[t._v(t._s(t.dialogForm.uploadDate))])]),e("el-form-item",{attrs:{label:"状态：",prop:"status"}},[e("el-select",{attrs:{placeholder:"状态"},model:{value:t.dialogForm.status,callback:function(e){t.$set(t.dialogForm,"status",e)},expression:"dialogForm.status"}},[e("el-option",{attrs:{value:0,label:"未标注"}}),e("el-option",{attrs:{value:1,label:"已审核"}}),e("el-option",{attrs:{value:2,label:"已标注/待审核"}})],1)],1),e("div",{staticClass:"footer-item"},[e("el-button",{on:{click:t.cancleForm}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",disabled:t.isSubmit},on:{click:function(e){return t.submitForm("dialogForm")}}},[t._v("确 定")])],1)],1)],1),e("el-dialog",{attrs:{title:"导入数据",visible:t.importVisible,width:"20%"},on:{"update:visible":function(e){t.importVisible=e}}},[e("div",{staticClass:"upload-box"},[e("span",[t._v("选择文件：")]),e("Upload",{attrs:{"files-format":t.filesFormat}},[e("i",{staticClass:"vue-dsn-icon-upload"}),t._v("上传文件 ")])],1),e("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")]),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.cancleImport}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirmImport}},[t._v("确 定")])],1)]),e("el-dialog",{attrs:{title:"导出数据",visible:t.exportVisible,width:"30%"},on:{"update:visible":function(e){t.exportVisible=e}}},[e("div",{staticClass:"export-data"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("xlsx")}}},[t._v("EXCEL格式")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("csv")}}},[t._v("CSV格式")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.exportTable("txt")}}},[t._v("TXT格式")])],1),e("div",{staticClass:"hints"},[t._v("TIP：请选择要导出数据的格式。")])]),e("el-dialog",{staticClass:"dialog-form",attrs:{title:"详细信息",visible:t.detailVisible,width:"45%","before-close":t.handleClose2},on:{"update:visible":function(e){t.detailVisible=e}}})],1)],1)},o=[],s=a("50fc"),l=a("cd77"),n=a("333d"),r=a("c7f0"),u=a("b522"),c={name:"Table",components:{Pagination:n["a"],Upload:r["a"],Hints:u["a"]},data(){return{listLoading:!0,listQuery:{uploaderID:void 0,status:void 0,currentPage:1,pageSize:10},dialogForm:{uploaderID:void 0,description:void 0,uploadDate:void 0,status:void 0,hobby:[]},total:0,Data:[],tableData:[],multipleSelection:[],formVisible:!1,isSubmit:!1,importVisible:!1,filesFormat:".txt, .csv, .xls, .xlsx",exportVisible:!1,detailVisible:!1}},created(){this.fetchData()},methods:{handleSelectionChange(t){this.multipleSelection=t},showDetails(t,e){let a="http://localhost:9000"+e.path;window.open(a,"_blank")},handleCreate(){this.formVisible=!0,this.dialogForm.uploaderID=void 0,this.dialogForm.description=void 0,this.dialogForm.uploadDate=void 0,this.dialogForm.status=void 0},handleEdit(t,e){console.log(t,e),this.formVisible=!0,this.dialogForm.uploaderID=e.uploaderID,this.dialogForm.description=e.description,this.dialogForm.uploadDate=e.uploadDate,this.dialogForm.status=e.status},handleDelete(t,e){console.log(t,e),this.$confirm("此操作将删除选中数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(s["b"])(e.imageID).then(t=>{console.log("deleteimage-res:",t),this.$message({type:"success",message:"删除成功!"}),this.fetchData()}).catch(()=>{this.$message({type:"warning",message:"删除失败"}),this.fetchData()}),this.fetchData()}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},handleClose(){this.formVisible=!1,this.$refs.dialogForm.resetFields()},handleClose2(){this.detailVisible=!1,this.$refs.dialogForm.resetFields()},fetchData(){this.listLoading=!0,Object(s["f"])().then(t=>{console.log("getImageAll",t);const e=t.data;if(t.code>=200&&t.code<300){this.total=e.length,this.tableData=e,this.Data=e;for(let t of e)0==t.status?t.status="未标注":1==t.status?t.status="已审核":2==t.status&&(t.status="已标注/待审核");this.listLoading=!1}}).catch(()=>{this.listLoading=!1})},onSubmit(){console.log("this.tableData:",this.tableData);let t=Object.values(this.listQuery).filter(t=>void 0!==t).length>0,e=this.Data.slice();this.listQuery.uploaderID&&(e=e.filter(t=>void 0!=t["uploaderID"]&&String(t["uploaderID"])===this.listQuery.uploaderID),console.log("result1",e)),this.listQuery.status&&(e=e.filter(t=>void 0!==t["status"]&&-1!==t["status"].toString().indexOf(this.listQuery.status)),console.log("result2",e)),t||(e=this.Data.slice()),this.tableData=e},handleImport(){this.importVisible=!0},submitForm(t){this.$refs[t].validate(t=>{if(!t)return this.isSubmit=!1,!1;console.log("tvalid",t),console.log("this.dialogForm",this.dialogForm),this.formVisible=!1})},cancleForm(){this.$refs.dialogForm.resetFields(),this.formVisible=!1},confirmImport(){this.importVisible=!1},cancleImport(){this.importVisible=!1},exportTable(t){if(this.tableData.length){const e={header:["上传者","切片描述","上传时间","状态"],key:["uploaderID","description","uploadDate","status"],data:this.tableData,autoWidth:!0,fileName:"综合表格",bookType:t};l["a"].exportDataToExcel(e),this.exportVisible=!1}}}},d=c,p=(a("41f7"),a("2877")),f=Object(p["a"])(d,i,o,!1,null,null,null);e["default"]=f.exports}}]);